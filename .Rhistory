knitr::opts_chunk$set(echo = TRUE)
library("tidyverse")
summary(cars)
plot(pressure)
rawPropertyData <- read_delim('Cambridge_Property_Database_FY16-FY19.csv', delim = ',')
summary(rawPropertyData)
factorCols <- c(
"StateClassCode",
"PropertyClass",
"Zoning",
"TaxDistrict",
"ResidentialExemption",
"Owner_State",
"Exterior_Style",
"Exterior_occupancy",
"Exterior_WallType",
"Exterior_RoofType",
"Exterior_RoofMaterial",
"Interior_Flooring",
"Interior_Layout",
"Interior_LaundryInUnit",
"Systems_HeatType",
"Systems_HeatFuel",
"Systems_CentralAir",
"Systems_Plumbing",
"Condition_InteriorCondition",
"Condition_OverallCondition",
"Condition_OverallGrade"
)
propertyData <- rawPropertyData %>% mutate_at(factorCols, as.factor)
ggplot(propertyData, aes(x = AssessedValue)) + geom_histogram(bins = 50) + scale_x_log10()
ggplot(propertyData, aes(x = YearOfAssessment)) + geom_histogram()
propertyData %>% filter(YearOfAssessment > 2019 | YearOfAssessment <= 1900) %>% ggplot(aes(x = YearOfAssessment)) + geom_histogram()
propertyData %>% filter(YearOfAssessment > 1990 & YearOfAssessment <= 2019) %>% ggplot(aes(x = YearOfAssessment)) + geom_histogram()
propertyData %>% group_by("PID") %>% summarize(count = n())
propertyData %>% group_by("PID") %>% summarize(count)
propertyData %>% group_by("PID") %>% summarize()
propertyData %>% count("PID")
propertyData %>% tally("PID")
propertyData %>% count(PID)
propertyData %>% count(PID) %>% sort()
propertyData %>% count(PID) %>% order()
propertyData %>% count(PID) %>% arrange()
propertyData %>% count(PID) %>% arrange(desc(n))
propertyData %>% count(PID) %>% arrange(desc(n)) %>% head()
propertyData %>% count(PID) %>% arrange(desc(n)) %>% head(n = 20)
propertyData %>% count(PID) %>% arrange(desc(n)) %>% head(n = 20) %>% ggplot(aes(x = PID, y = n)) + geom_bar()
propertyData %>% count(PID) %>% arrange(desc(n)) %>% head(n = 20) %>% ggplot(aes(x = PID, y = n)) + geom_bar(stat = "identity")
factorCols <- c(
"PID",
"StateClassCode",
"PropertyClass",
"Zoning",
"TaxDistrict",
"ResidentialExemption",
"Owner_State",
"Exterior_Style",
"Exterior_occupancy",
"Exterior_WallType",
"Exterior_RoofType",
"Exterior_RoofMaterial",
"Interior_Flooring",
"Interior_Layout",
"Interior_LaundryInUnit",
"Systems_HeatType",
"Systems_HeatFuel",
"Systems_CentralAir",
"Systems_Plumbing",
"Condition_InteriorCondition",
"Condition_OverallCondition",
"Condition_OverallGrade"
)
propertyData <- rawPropertyData %>% mutate_at(factorCols, as.factor)
propertyData %>% count(PID) %>% arrange(desc(n)) %>% head(n = 20) %>% ggplot(aes(x = PID, y = n)) + geom_bar(stat = "identity")
propertyData %>% count(PID) %>% arrange(desc(n)) %>% head(n = 20) %>% ggplot(aes(x = reorder(PID, n), y = n)) + geom_bar(stat = "identity")
propertyData %>% count(PID) %>% arrange(desc(n)) %>% head(n = 20) %>% ggplot(aes(x = reorder(PID, n), y = n)) + geom_bar(stat = "identity")
propertyData %>% count(PID) %>% arrange(desc(n)) %>% head(n = 10) %>% ggplot(aes(x = reorder(PID, n), y = n)) + geom_bar(stat = "identity")
propertyData %>% count(PID) %>% arrange(desc(n)) %>% head(n = 10) %>% ggplot(aes(x = reorder(PID, n), y = n)) + geom_bar(stat = "identity") + xlab("Property ID") + ylab("Number of Assessments")
propertyData %>% count(PID) %>% arrange(desc(n)) %>% head(n = 15) %>% ggplot(aes(x = reorder(PID, n), y = n)) + geom_bar(stat = "identity") + xlab("Property ID") + ylab("Number of Assessments")
propertyData %>% count(PID) %>% arrange(desc(n)) %>% head(n = 15) %>% ggplot(aes(x = reorder(PID, n), y = n)) + geom_bar(stat = "identity") + xlab("Property ID") + ylab("Number of Assessments")
propertyData %>% filter(PID == 11716)
propertyData %>% filter(PID == 11716)
propertyData %>% filter(PID == 11716)
propertyData %>% filter(PID == 21897)
propertyData %>% filter(PID == 12630)
str(propertyData$PropertyClass)
levels(propertyData$PropertyClass)
propertyData %>% count(PropertyClass) %>% arrange(desc(n))
propertyData %>% count(PropertyClass) %>% arrange(desc(n))
knitr::opts_chunk$set(echo = TRUE)
library("tidyverse")
propertyData %>% count(PropertyClass) %>% arrange(desc(n))
propertyData %>% count(PropertyClass) %>% arrange(desc(n)) %>% head(n = 15) %>% ggplot(aes(x = reorder(PropertyClass, n), y = n)) + geom_bar(stat = "identity") + xlab("Property Class") + ylab("Number of Assessments")
propertyData %>% count(PropertyClass) %>% arrange(desc(n))
propertyData %>% count(PropertyClass) %>% arrange(desc(n)) %>% head(n = 10) %>% ggplot(aes(x = reorder(PropertyClass, n), y = n)) + geom_bar(stat = "identity") + xlab("Property Class") + ylab("Number of Assessments")
singleResUnitData <- propertyData %>% filter(PropertyClass == "CONDOMINIUM" | PropertyClass == "SNGL-FAM-RES")
singleResUnitData %>% group_by(PID) %>% summarize_all(max)
singleResUnitData %>% group_by(PID) %>% summarize_at(is.numeric, max)
singleResUnitData %>% group_by(PID) %>% summarize_if(is.numeric, max)
singleResUnitData %>% group_by(PID) %>% summarize_if(is.numeric, max) %>%
ggplot(aes(x = AssessedValue))
singleResUnitData %>% group_by(PID) %>% summarize_if(is.numeric, max) %>%
ggplot(aes(x = AssessedValue)) + geom_histogram()
singleResUnitData %>% group_by(PID) %>% summarize_if(is.numeric, max) %>%
ggplot(aes(x = AssessedValue)) + geom_histogram() + scale_x_log10()
singleResUnitData %>% group_by(PID) %>% summarize_if(is.numeric, max) %>%
ggplot(aes(x = AssessedValue)) + geom_histogram(bins = 50) + scale_x_log10()
singleResUnitData <- propertyData %>% filter(PropertyClass == "CONDOMINIUM" | PropertyClass == "SNGL-FAM-RES" | PropertyClass == "CNDO LUX")
singleResUnitData %>% group_by(PID) %>% summarize_if(is.numeric, max) %>%
ggplot(aes(x = AssessedValue)) + geom_histogram(bins = 50) + scale_x_log10() + facet_grid(Interior_Bedrooms ~ .)
singleResUnitData %>% group_by(PID) %>% summarize_if(is.numeric, max) %>%
ggplot(aes(x = AssessedValue)) + geom_histogram(bins = 50) + scale_x_log10()
singleResUnitData %>% group_by(PID) %>% summarize_if(is.numeric, max) %>% filter(AssessedValue > 0) %>% ggplot(aes(x = AssessedValue)) + geom_histogram(bins = 50) + scale_x_log10()
singleResUnitData %>% group_by(PID) %>% summarize_if(is.numeric, max) %>%
filter(AssessedValue > 0) %>% filter(Interior_Bedrooms <= 3) %>%
ggplot(aes(x = AssessedValue)) + geom_histogram(bins = 50) + scale_x_log10() + facet_grid(Interior_Bedrooms ~ .)
